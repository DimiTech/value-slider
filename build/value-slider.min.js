!function(a){"use strict";function b(a,b){var c;if(void 0!==b[0]&&"INPUT"===b[0].tagName)c=b[0];else{if("INPUT"!==b.tagName)throw new Error('Please supply an <input> element in which you wish to load the "ValueSlider" widget into.');c=b}var d=document.createElement("div");d.className="value-slider",c.parentNode.insertBefore(d,c),d.appendChild(c),c.style.display="none",a.parentDiv=d}function c(a,b){a.widget=document.createElement("div"),a.widget.className="value-slider-body",a.parentDiv.appendChild(a.widget),a.hide();var c=document.createElement("div");if(c.className="slider-value",a.widget.appendChild(c),"undefined"!==b&&"object"==typeof b){var d=document.createElement("div");d.className="slider-handle-left",a.widget.children[0].appendChild(d)}var e=document.createElement("div");e.className="slider-handle-right",a.widget.children[0].appendChild(e)}function d(a,b,c,d){if(!(c>b))throw new Error("Slider's minValue must be smaller than its maxValue.");if(a.minValue=b,a.maxValue=c,(a.maxValue-a.minValue)%d!==0)throw new Error("Slider's range (maxValue - minValue) must be divisible by step value without a remainder.");a.step=d}function e(a,b){var c,d=a.widget.children[0];b?(c=a.leftValue/(a.maxValue-a.minValue)*100,d.style.left=c+"%",e(a)):(c=100*(a.rightValue-(a.leftValue||a.minValue))/(a.maxValue-a.minValue),d.style.width=c+"%")}function f(a){var b=a.rightValue%a.step;b>=a.step/2?a.rightValue=a.rightValue-b+a.step:a.rightValue=a.rightValue-b}function g(a){void 0===a.leftValue?(a.parentDiv.querySelector("input").value=a.rightValue,a.parentDiv.querySelector("input").defaultValue=a.rightValue):(a.parentDiv.querySelector("input").value=a.leftValue+","+a.rightValue,a.parentDiv.querySelector("input").defaultValue=a.leftValue+","+a.rightValue)}function h(a,b,c,d){return b>a?a=b:a>c&&(a=c),d&&(a=~~a),a}function i(a,b){void 0!==b&&k(a),j(a),m(a)}function j(a){var b=a.widget.getElementsByClassName("slider-handle-right")[0];a.rightHandleMouseDown=!1,b.onmousedown=function(b){b.preventDefault(),a.rightHandleMouseDown===!1&&(a.rightHandleMouseDown=!0),document.addEventListener("mouseup",function(b){a.rightHandleMouseDown&&(a.rightHandleMouseDown=!1)}),document.addEventListener("mousemove",function(b){if(a.rightHandleMouseDown&&1===b.which){var c=l(a,b.clientX);c=h(c,0,1,!1),a.setRightPercent(c)}})}}function k(a){var b=a.widget.getElementsByClassName("slider-handle-left")[0];a.leftHandleMouseDown=!1,b.onmousedown=function(b){b.preventDefault(),a.leftHandleMouseDown===!1&&(a.leftHandleMouseDown=!0),document.addEventListener("mouseup",function(b){a.leftHandleMouseDown&&(a.leftHandleMouseDown=!1)}),document.addEventListener("mousemove",function(b){if(a.leftHandleMouseDown&&1===b.which){var c=l(a,b.clientX);c=h(c,0,1,!1),a.setLeftPercent(c)}})}}function l(a,b){var c=(b-a.widget.offsetLeft)/a.widget.clientWidth+.005;return c}function m(a){function b(a){var b=document.createEvent("MouseEvents");b.initEvent("mousedown",!0,!0),a.dispatchEvent(b)}function c(a,b){var c=b.parentDiv.getElementsByClassName("slider-value")[0];return a-c.offsetLeft>c.clientWidth/2}var d=a.widget.getElementsByClassName("slider-handle-right")[0],e=a.widget.getElementsByClassName("slider-handle-left")[0];a.widget.addEventListener("mousedown",function(f){if(console.log(),a.rightHandleMouseDown===!1){var g=l(a,f.clientX),h=!0;void 0!==a.leftValue&&void 0!==a.leftHandleMouseDown&&(h=c(f.clientX,a)),h?(b(d),a.setRightPercent(g)):a.leftHandleMouseDown===!1&&(b(e),a.setLeftPercent(g))}})}var n=function(a){b(this,a.element),c(this,a.range),d(this,a.minValue||0,a.maxValue||100,a.step||1),void 0!==a.range?(this.setRightValue(a.range.rightValue||a.maxValue||100),this.setLeftValue(a.range.leftValue||a.minValue||0)):this.setValue(a.value||parseInt(this.parentDiv.getElementsByTagName("input")[0].defaultValue)||0),i(this,a.range),this.show()};n.prototype.setPercent=function(a){this.setRightPercent(a,"setPercent()")},n.prototype.setRightPercent=function(a,b){if("number"!=typeof a)throw new Error((b||"setRightPercent()")+" expects a floating point number parameter! (a value from 0.0 to 1.0)");var c=~~(a*(this.maxValue-this.minValue)+this.minValue),d=this.leftValue+(this.step||1)||this.maxValue;this.rightValue=h(c,d,this.maxValue,!0),0!==this.step&&f(this),g(this),e(this)},n.prototype.setLeftPercent=function(a){if("number"!=typeof a)throw new Error("setLeftPercent() expects a floating point number parameter! (a value from 0.0 to 1.0)");var b=~~(a*(this.maxValue-this.minValue)+this.minValue),c=this.rightValue-(this.step||1)||this.maxValue;this.leftValue=h(b,0,c,!0),0!==this.step&&f(this),g(this),e(this,!0)},n.prototype.setValue=function(a){this.setRightValue(a,"setValue()")},n.prototype.setRightValue=function(a,b){if("number"!=typeof a)throw new Error((b||"setRightValue()")+" expects a number parameter! (a value from "+this.minValue+" to "+this.maxValue+")");var c=this.leftValue+(this.step||1)||this.maxValue;this.rightValue=h(a,c,this.maxValue,!0),0!==this.step&&f(this),g(this),e(this)},n.prototype.setLeftValue=function(a){if("number"!=typeof a)throw new Error("setLeftValue() expects a number parameter! (a value from "+this.minValue+" to "+this.maxValue+")");var b=this.rightValue-(this.step||1)||this.maxValue;this.leftValue=h(a,0,b,!0),0!==this.step&&f(this),g(this),e(this,!0)},n.prototype.getValue=function(){return this.getRightValue()},n.prototype.getRightValue=function(){return this.rightValue},n.prototype.hide=function(){this.widget.style.visibility="hidden"},n.prototype.show=function(){this.widget.style.visibility="visible"},n.prototype.remove=function(){this.display("none")},n.prototype.display=function(a){var b=a||"block";this.widget.style.display=b},a.ValueSlider=n}(window);