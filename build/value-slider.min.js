!function(a){"use strict";function b(a,b){var c;if(void 0!==b[0]&&"INPUT"===b[0].tagName)c=b[0];else{if("INPUT"!==b.tagName)throw new Error('Please supply an <input> element in which you wish to load the "ValueSlider" widget into.');c=b}var d=document.createElement("div");d.className="value-slider",c.parentNode.insertBefore(d,c),d.appendChild(c),c.style.display="none",a.parentDiv=d}function c(a,b){a.widget=document.createElement("div"),a.widget.className="value-slider-body",a.parentDiv.appendChild(a.widget),a.hide();var c=document.createElement("div");if(c.className="slider-value",a.widget.appendChild(c),b.showBuffer===!0&&void 0===b.range&&b.vertical!==!0){var d=document.createElement("div");d.className="slider-buffered",a.widget.appendChild(d),a.buffered=b.buffered||0}if("undefined"!==b.range&&"object"==typeof b.range){var e=document.createElement("div");e.className="slider-handle-left",a.widget.children[0].appendChild(e)}if(b.showMouseAt===!0&&void 0===b.range&&b.vertical!==!0){var f=document.createElement("div");f.className="slider-mouseat",a.widget.appendChild(f),a.mouseAt=0}var g=document.createElement("div");g.className="slider-handle-right",a.widget.children[0].appendChild(g)}function d(a,b,c,d){if(!(c>b))throw new Error("Slider's minValue must be smaller than its maxValue.");if(a.minValue=b,a.maxValue=c,(a.maxValue-a.minValue)%d!==0)throw new Error("Slider's range (maxValue - minValue) must be divisible by step value without producing a remainder.");a.step=d}function e(a,b){a.parentDiv.className+="-vertical",a.widget.className+="-vertical";var c=a.widget.getElementsByClassName("slider-handle-right")[0];if(c.className+="-vertical",b){var d=a.widget.getElementsByClassName("slider-handle-left")[0];d.className+="-vertical"}var e=a.widget.getElementsByClassName("slider-value")[0];if(e.className+="-vertical",void 0!==a.buffered){var f=a.widget.getElementsByClassName("slider-buffered")[0];f.className+="-vertical"}a.vertical=!0}function f(a,b){var c="slider-value";a.vertical===!0&&(c+="-vertical");var d,e=a.widget.getElementsByClassName(c)[0];b?(d=a.leftValue/(a.maxValue-a.minValue)*100,a.vertical===!0?(d+=(a.maxValue-a.rightValue)/(a.maxValue-a.minValue)*100,e.style.height=100-d+"%"):(e.style.left=d+"%",f(a))):(d=100*(a.rightValue-(a.leftValue||a.minValue))/(a.maxValue-a.minValue),a.vertical===!0?(e.style.height=d+"%",void 0===a.leftValue?e.style.top=100-d+"%":(d=100-a.leftValue/(a.maxValue-a.minValue)*100-d,e.style.top=d+"%")):e.style.width=d+"%")}function g(a,b){var c=b%a;return c>=a/2?b=b-c+a:b-=c,b}function h(a){void 0===a.leftValue?(a.parentDiv.querySelector("input").value=a.rightValue,a.parentDiv.querySelector("input").defaultValue=a.rightValue):(a.parentDiv.querySelector("input").value=a.leftValue+","+a.rightValue,a.parentDiv.querySelector("input").defaultValue=a.leftValue+","+a.rightValue)}function i(a,b,c,d){return b>a?a=b:a>c&&(a=c),d&&(a=~~a),a}function j(a){var b=a.widget.getElementsByClassName("slider-buffered")[0];b.style.width=a.buffered+"%"}function k(a,b){void 0!==b&&m(a),l(a),p(a),void 0!==a.mouseAt&&q(a)}function l(a){var b=n(a,"right");a.rightHandleMouseDown=!1,b.onmousedown=function(c){if(c.preventDefault(),a.rightHandleMouseDown===!1&&(a.rightHandleMouseDown=!0),document.addEventListener("mouseup",function(b){a.rightHandleMouseDown&&(a.rightHandleMouseDown=!1),void 0!==a.mouseAt&&(d.style.width="0%")}),void 0!==a.mouseAt)var d=a.widget.getElementsByClassName("slider-mouseat")[0];document.addEventListener("mousemove",function(c){if(a.rightHandleMouseDown&&1===c.which){var e=o(a,c.clientX,c.clientY);a.setRightPercent(e),void 0!==a.mouseAt&&(a.mouseAt=(b.offsetLeft+10)/a.widget.offsetWidth*100,d.style.width=a.mouseAt+"%")}})}}function m(a){var b=n(a,"left");a.leftHandleMouseDown=!1,b.onmousedown=function(b){b.preventDefault(),a.leftHandleMouseDown===!1&&(a.leftHandleMouseDown=!0),document.addEventListener("mouseup",function(b){a.leftHandleMouseDown&&(a.leftHandleMouseDown=!1)}),document.addEventListener("mousemove",function(b){if(a.leftHandleMouseDown&&1===b.which){var c=o(a,b.clientX,b.clientY);a.setLeftPercent(c)}})}}function n(a,b){var c;return c=a.vertical===!0?a.widget.getElementsByClassName("slider-handle-"+b+"-vertical")[0]:a.widget.getElementsByClassName("slider-handle-"+b)[0]}function o(a,b,c){var d;return d=a.vertical===!0?1-(c-a.widget.offsetTop)/a.widget.clientHeight:(b-a.widget.offsetLeft)/a.widget.clientWidth,d=i(d,0,1,!1)}function p(a){function b(a){var b=document.createEvent("MouseEvents");b.initEvent("mousedown",!0,!0),a.dispatchEvent(b)}function c(a,b,c){var d="slider-value";c.vertical===!0&&(d+="-vertical");var e,f=c.parentDiv.getElementsByClassName(d)[0];return e=c.vertical===!0?b-f.offsetTop<f.clientHeight/2:a-f.offsetLeft>f.clientWidth/2}var d=n(a,"right");a.widget.addEventListener("mousedown",function(e){if(a.rightHandleMouseDown===!1){var f;if(void 0!==a.leftHandleMouseDown){var g=n(a,"left");if(a.leftHandleMouseDown===!1){e.preventDefault(),f=o(a,e.clientX,e.clientY);var h=c(e.clientX,e.clientY,a);h&&a.rightHandleMouseDown===!1?(b(d),a.setRightPercent(f)):a.leftHandleMouseDown===!1&&(b(g),a.setLeftPercent(f))}}else e.preventDefault(),f=o(a,e.clientX,e.clientY),b(d),a.setRightPercent(f)}})}function q(a){function b(a,b){var c=a.maxValue-a.minValue,d=b*c;return d=g(a.step,d),b=d/c}var c=a.widget.getElementsByClassName("slider-mouseat")[0];a.widget.addEventListener("mousemove",function(d){if(a.rightHandleMouseDown===!1){var e=o(a,d.clientX,d.clientY);1!==a.step&&(e=b(a,e)),a.mouseAt=i(e,0,1,!1),c.style.width=100*a.mouseAt+"%"}}),a.widget.addEventListener("mouseleave",function(b){a.mouseAt=0,c.style.width="0%"})}var r=function(a){b(this,a.element),c(this,a),d(this,a.minValue||0,a.maxValue||100,a.step||1),a.vertical===!0&&e(this,void 0!==a.range),void 0!==a.range?(this.setRightValue(a.range.rightValue||a.maxValue||100),this.setLeftValue(a.range.leftValue||a.minValue||0)):this.setValue(a.value||parseInt(this.parentDiv.getElementsByTagName("input")[0].defaultValue)||0),void 0!==this.buffered&&this.setBufferPercent(this.buffered),k(this,a.range),this.show()};r.prototype.setPercent=function(a){this.setRightPercent(a,"setPercent()")},r.prototype.setRightPercent=function(a,b){if("number"!=typeof a)throw new Error((b||"setRightPercent()")+" expects a floating point number parameter! (a value from 0.0 to 1.0)");var c=~~(a*(this.maxValue-this.minValue)+this.minValue),d=void 0!==this.leftValue?this.leftValue+(this.step||1):this.minValue;this.rightValue=i(c,d,this.maxValue,!0),0!==this.step&&(this.rightValue=g(this.step,this.rightValue)),h(this),f(this)},r.prototype.setLeftPercent=function(a){if("number"!=typeof a)throw new Error("setLeftPercent() expects a floating point number parameter! (a value from 0.0 to 1.0)");var b=~~(a*(this.maxValue-this.minValue)+this.minValue),c=this.rightValue?this.rightValue-(this.step||1):this.maxValue;this.leftValue=i(b,0,c,!0),0!==this.step&&(this.leftValue=g(this.step,this.leftValue)),h(this),f(this,!0)},r.prototype.setValue=function(a){this.setRightValue(a,"setValue()")},r.prototype.setRightValue=function(a,b){if("number"!=typeof a)throw new Error((b||"setRightValue()")+" expects a number parameter! (a value from "+this.minValue+" to "+this.maxValue+")");var c=void 0!==this.leftValue?this.leftValue+(this.step||1):this.minValue;this.rightValue=i(a,c,this.maxValue,!0),0!==this.step&&(this.rightValue=g(this.step,this.rightValue)),h(this),f(this)},r.prototype.setLeftValue=function(a){if("number"!=typeof a)throw new Error("setLeftValue() expects a number parameter! (a value from "+this.minValue+" to "+this.maxValue+")");var b=this.rightValue?this.rightValue-(this.step||1):this.maxValue;this.leftValue=i(a,0,b,!0),0!==this.step&&(this.leftValue=g(this.step,this.leftValue)),h(this),f(this,!0)},r.prototype.setBufferPercent=function(a){if(void 0===this.buffered)throw new Error("setBufferPercent() works only when there is a buffer");a=i(a,0,1),this.buffered=~~(100*a),j(this,a)},r.prototype.getValue=function(){return this.getRightValue()},r.prototype.getRightValue=function(){return this.rightValue},r.prototype.hide=function(){this.widget.style.visibility="hidden"},r.prototype.show=function(){this.widget.style.visibility="visible"},r.prototype.remove=function(){this.display("none")},r.prototype.display=function(a){var b=a||"block";this.widget.style.display=b},a.ValueSlider=r}(window);